<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><style>@import 'https://fonts.googleapis.com/css2?family=VT323&display=swap'</style><link rel=stylesheet href=https://sarahfrench.dev/sass/main.css><base href=https://sarahfrench.dev/><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#menu"),t=new IntersectionObserver((e)=>{console.log("callback fired");const n=e[0];n.target.classList.toggle("nav--pinned",n.intersectionRatio<1)},{threshold:[1]});t.observe(e)})</script><title>Debugging Terraform providers with VS Code | Sarah French</title></head><body><nav id=menu class=nav><a class=nav-link href=/ title>Home
</a><a class=nav-link href=/blog title>Blog
</a><a class=nav-link href=/memo title>Memos
</a><a class=nav-link href=/project title>Projects</a></nav><svg class="hero hero--subpage" width="100%" height="100%" viewBox="0 0 800 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><g transform="matrix(1,0,0,1,1,-196.312)"><g transform="matrix(1,0,0,0.506741,0,197.407)"><rect x="-.829" y="-2.161" width="801.197" height="402.37" style="fill:#12022d"/></g><g id="veticals"><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M393.82 194.416 393.843 399.466" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g></g><g id="horizontals"><path d="M0 365 8e2 365.024" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 328H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 302H0" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 280H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 263.6.0 263.843" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 249.563 8e2 249.576" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 237.737 8e2 237.846" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 230H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M-.092 222H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 215 8e2 214.978" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M.149 209H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 203H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><g transform="matrix(1,0,0,1,0,-1)"><path d="M0 2e2H8e2.0z" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/></g></g></g></svg><div class="main-wrapper main-wrapper--subpage"><main class=main-content><article class=post><div class="tag-list__list styled-font"><a class=tag-list__item href=/tags/terraform>Terraform
</a><a class=tag-list__item href=/tags/how-to>How-To</a></div><header><h1 class="styled-font page-title">Debugging Terraform providers with VS Code</h1></header><p class=post__date>May 28, 2024</p><p>My first experience of &lsquo;debugging&rsquo; was using good old <code>console.log</code> in JavaScript when I was first learning about programming. Since then I&rsquo;ve learned that print statements and logs only get you so far, and <em>proper</em> debugging is so much more useful. When I first started contributing to Terraform provider projects I wasn&rsquo;t shown how to use debuggers with providers and the resources I found online were a bit fragmented. So, this blog is a way for me to share what I learned and hopefully help others (or just be a reference for myself in the future!).</p><h2 id=whats-a-terraform-provider>What&rsquo;s a Terraform provider?</h2><p>This blog won&rsquo;t cover what Terraform and Terraform providers are at great length. There are much <a href=https://developer.hashicorp.com/terraform/language/providers>better resources out on the internet to explain them</a>. Having said that, here&rsquo;s a short summary: In a nutshell, Terraform is an Infrastructure as Code (IaC) tool that lets users write declarative configuration code that is used to create resources in the &lsquo;real world&rsquo;. Terraform achieves this by interacting with APIs, for example AWS&rsquo;s APIs to create an EC2 instance, or GitHub&rsquo;s API to create a new team in a GitHub origanization. Terraform itself doesn&rsquo;t interact with APIs. Instead, Terraform instructs Terraform provider plugins to do the job of creating, reading, updating or deleting the given resource and report back with data about the resource once it&rsquo;s done.</p><h2 id=why-is-a-debugger-needed>Why is a debugger needed?</h2><p>In a perfect world providers would be a simple adapter that maps data from API entities to the data structure describing the resource in Terraform. However often APIs aren&rsquo;t designed in a way that works well with Terrform, for example: a mixture of declarative and imperative endpoints to manage one entity type, split control of a field&rsquo;s value between client and server, API entities that are split into multiple entities in Terraform to enable more fine-grained control, etc. Depending on the situation you might need to write more complex code than usual, which begins to make using a debugger more appealing. Add on considerations of how that code should behave when a resource is updated versus created, or updated given a prior state, then a debugger begins looking reeeeally appealing.</p><h2 id=setup>Setup</h2><p>To debug providers using VS Code you&rsquo;ll need to install <a href="https://marketplace.visualstudio.com/items?itemName=golang.Go">the Go extension for VS Code</a>. This extension will provide a way to debug Go code using the VS Code UI, such as creating and navigating through breakpoints. The extension requires a few dependencies to be installed, including <a href=https://github.com/go-delve/delve>Delve</a>, but VS Code should guide you through installing dependencies on your first try at debugging Go code.</p><p>Once the extension is set up, open the <a href=https://code.visualstudio.com/docs/editor/debugging#_run-and-debug-view>run and debug menu</a> in the side bar and you should see this prompt to configure the debugger tools by creating <a href=https://code.visualstudio.com/docs/editor/debugging#_launch-configurations>a launch configuration code at <code>.vscode/launch.json</code></a>.</p><figure><img src=https://res.cloudinary.com/dl1rwtqzi/image/upload/v1717346572/sarahfrench.dev/image/run-debug-menu.png><figcaption>You can either click through from here, or make `.vscode/launch.json` manually.</figcaption></figure><p>Create an empty file at <code>.vscode/launch.json</code>. The next sections will describe what configurations to include in that file and how to use them.</p><p>Finally, create a <code>.vscode/private.env</code> file and add details about environment variables that are required for running the acceptance tests and configuring the provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6272a4># Define each value on separate lines</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>KEY</span><span style=color:#ff79c6>=</span>value
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>USERNAME</span><span style=color:#ff79c6>=</span>user
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>PASSWORD</span><span style=color:#ff79c6>=</span>password
</span></span></code></pre></div><p>Make sure your repo has the <code>.vscode/</code> folder gitignored; these values should not be committed to version control.</p><p>Now we&rsquo;re ready to get started!</p><h2 id=debugging-providers-during-acceptance-tests>Debugging providers during acceptance tests</h2><p>The best approach when adding a new feature to or investigating a bug in a Terraform provider is to create an acceptance test that initially fails, following TDD. Then you work to add the feature or fix the bug so that the test passes.</p><p>The testing framework for providers uses a local Terraform binary and performs real plan, apply (etc.) actions using the provider code present in your repo. As a result, you can add breakpoints and then launch a test in debug mode to see how data flows through your new code.</p><p>First, paste this into the file (or append the configuration object if you already have a lauch.json file):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;version&#34;</span> : <span style=color:#f1fa8c>&#34;0.2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;configurations&#34;</span> : [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Debug acceptance tests
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>&#34;name&#34;</span>: <span style=color:#f1fa8c>&#34;Debug Selected Acceptance Test&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;request&#34;</span> : <span style=color:#f1fa8c>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;type&#34;</span> : <span style=color:#f1fa8c>&#34;go&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;args&#34;</span> : [
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-test.v&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-test.run&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;^${selectedText}$&#34;</span>
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;mode&#34;</span> : <span style=color:#f1fa8c>&#34;auto&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;program&#34;</span> : <span style=color:#f1fa8c>&#34;${fileDirname}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;envFile&#34;</span> : <span style=color:#f1fa8c>&#34;${workspaceFolder}/.vscode/private.env&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;showLog&#34;</span> : <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To use this debug configuration, navigate to an acceptance test in the code base and select the text of test&rsquo;s name with your cursor. Then, open the run & debug menu (click <code>View > Run</code> in the menu bar). Make sure that the dropdown menu has the &ldquo;Debug Selected Acceptance Test&rdquo; configuration selected, and then click the green arrow to start the test!</p><figure><img src=https://res.cloudinary.com/dl1rwtqzi/image/upload/v1717348861/sarahfrench.dev/image/screenshot-of-selected-test-debugging.png><figcaption>Despite clicking out of the editor tab containing the code, the test name will still be selected and used as input to the debugging configuration.</figcaption></figure><p>This configuration builds a test binary and then runs a command like this, using the selected text to narrow down which test is run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./test-binary -test.v -test.run ^&lt;selectedText value here&gt;$
</span></span></code></pre></div><p>For information on how to create breakpoints in VS Code and start properly using the debugger, see <a href=https://code.visualstudio.com/docs/editor/debugging#_breakpoints>the official VS Code debugging documentation</a>.</p><h2 id=debugging-providers-during-manual-tests>Debugging providers during manual tests</h2><p>Sometimes manual testing might be unavoidable, or maybe you&rsquo;ve reproduced a bug with some HCL files and want to dive into investigation before committing to writing a whole test! In that case you can launch a provider server in debug mode on your laptop, and then <a href=https://developer.hashicorp.com/terraform/plugin/debugging#running-terraform-with-a-provider-in-debug-mode>pass an environment variable into Terraform commands that allow use of that pre-launched provider server</a>. Bear in mind that <a href=https://github.com/hashicorp/terraform-provider-google/blob/29bb50286c91afc0b99172d5119f339d44b5ecc6/main.go#L49-L51>debug mode is a feature that provider developers need to explicitly implement in a provider&rsquo;s code</a>, so might not be available for all provider projects out there.</p><p>First, open your <code>.vscode/launch.json</code> file and paste in the following JSON (or append the configuration object if you already have a lauch.json file):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;version&#34;</span>: <span style=color:#f1fa8c>&#34;0.2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Run provider in debug mode
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>&#34;name&#34;</span>: <span style=color:#f1fa8c>&#34;Start Provider in Debug Mode&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;request&#34;</span>: <span style=color:#f1fa8c>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;type&#34;</span>: <span style=color:#f1fa8c>&#34;go&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;mode&#34;</span>: <span style=color:#f1fa8c>&#34;debug&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;args&#34;</span>: [
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-debug&#34;</span>
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;program&#34;</span>: <span style=color:#f1fa8c>&#34;${workspaceFolder}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;envFile&#34;</span>: <span style=color:#f1fa8c>&#34;${workspaceFolder}/.vscode/private.env&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;showLog&#34;</span>: <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Open the run & debug menu (click <code>View > Run</code> in the menu bar), select &ldquo;Start Provider in Debug Mode&rdquo; from the dropdown of available debugger configurations, and press the green arrow to start.</p><p>Open the debug console tab (<code>View > Debug Console</code> in the menu bar) to see the output from the process that started. Eventually you should see a message like this in the logs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Provider started. To attach Terraform CLI, <span style=color:#8be9fd;font-style:italic>set</span> the TF_REATTACH_PROVIDERS environment variable with the following:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8be9fd;font-style:italic>TF_REATTACH_PROVIDERS</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;{&#34;registry.terraform.io/hashicorp/google&#34;:{&#34;Protocol&#34;:&#34;grpc&#34;,&#34;ProtocolVersion&#34;:5,&#34;Pid&#34;:48952,&#34;Test&#34;:true,&#34;Addr&#34;:{&#34;Network&#34;:&#34;unix&#34;,&#34;String&#34;:&#34;/var/folders/tf/m6_pn85n7mxdttnfbgycrk5r0000gn/T/plugin1673856406&#34;}}}&#39;</span>
</span></span></code></pre></div><p>You can then navigate to where your HCL files are, set that environment variable in your termainl, and then proceed to run Terraform commands using your lauched provider! Again, don&rsquo;t forget that you will need to <a href=https://code.visualstudio.com/docs/editor/debugging#_breakpoints>create breakpoints in the VS Code UI</a> to actually begin debugging.</p><h2 id=conclusion>Conclusion</h2><p>The two snippets of JSON above should help you get started debugging a provider while running either an acceptance test or <code>terraform</code> CLI commands. There&rsquo;s also the option of <a href=https://developer.hashicorp.com/terraform/plugin/debugging#delve-cli>using the Delve CLI directly</a> if you want to use Delve features that aren&rsquo;t supported in the VS Code UI, but I&rsquo;ve not felt limited by using the UI.</p><p>Happy debugging!</p></article></main></div><footer class=footer><p class=footer__text>Â© 2022, Built with <a class=underline href=https://gohugo.io/ rel="noopener noreferrer nofollow" target=_blank>Hugo</a></p></footer></body></html>