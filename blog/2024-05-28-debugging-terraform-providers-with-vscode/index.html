<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><style>@import 'https://fonts.googleapis.com/css2?family=VT323&display=swap'</style><link rel=stylesheet href=https://sarahfrench.dev/sass/main.css><base href=https://sarahfrench.dev/><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#menu"),t=new IntersectionObserver((e)=>{const n=e[0];n.target.classList.toggle("nav--pinned",n.intersectionRatio<1)},{threshold:[1]});t.observe(e)})</script><title>Debugging Terraform providers with VS Code | Sarah French</title></head><body><nav id=menu class=nav><a class=nav-link href=/ title>Home
</a><a class=nav-link href=/blog title>Blog
</a><a class=nav-link href=/memo title>Memos
</a><a class=nav-link href=/project title>Projects</a></nav><div><svg class="hero hero--clouds" width="100%" height="100%" viewBox="0 0 600 404" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><g transform="matrix(1,0,0,1,1,2.16087)"><rect x="-.829" y="-2.161" width="801.197" height="402.37" style="fill:#12022d"/><g id="veticals" class="floor-shine"><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M393.82 194.416 393.843 399.466" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g></g><g id="horizontals" class="floor-horizontal"><path d="M0 365 8e2 365.024"/><path d="M0 328H8e2"/><path d="M8e2 302H0"/><path d="M0 280H8e2"/><path d="M8e2 263.6.0 263.843"/><path d="M0 249.563 8e2 249.576"/><path d="M0 237.737 8e2 237.846"/><path d="M0 230H8e2"/><path d="M-.092 222H8e2"/><path d="M0 215 8e2 214.978"/><path d="M.149 209H8e2"/><path d="M0 203H8e2"/><path class="floor-horizon-line" d="M0 2e2H8e2.0z"/></g><g id="orion" class="orion star"><path d="M103.085 34.28l12.982 36.74L123.852 59.925l-7.709-34.501"/><path d="M116.032 70.756 144.64 86.538l17.491 5.241 59.243 37.768 18.131 43.879 41.335-38.973-57.773-23.767-14.149-37.719-28.529-10.448-17.432 28.138"/><path d="M208.987 72.816l38.454-46.12-18.034-8.938-15.201 3.921"/><path d="M247.592 26.174 261.516 53.67 258.104 64.529"/><g transform="matrix(0.204141,0,0,0.251119,147.512,5.36177)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,165.507,14.2322)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,179.738,41.6353)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,175.908,52.176)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,126.505,60.2825)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,98.6687,49.3785)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,80.4786,78.748)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,139.396,116.856)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,143.248,107.16)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,62.6625,74.0848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,34.0186,58.6969)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,42.4852,47.1863)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,35.1656,12.7774)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,20.9108,22.2022)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,157.63,160.78)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,198.853,121.664)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,141.842,97.9688)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,132.76,9.04423)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g></g><g id="stars" class="star" transform="matrix(1,0,0,1,248.716,0.816641)"><g transform="matrix(0.204141,0,0,0.251119,355.336,10.0073)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,310.777,126.984)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,243.056,1.10892)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,164.802,9.12317)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,416.225,14.9989)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,430.859,82.2276)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,17.4959,138.849)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,123.7,111.465)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,398.863,147.512)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,62.6625,74.0848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-25.6232,73.5142)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-233.733,116.464)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,35.1656,12.7774)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-297.185,64.3583)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-274.011,5.8848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,198.853,121.664)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,141.842,97.9688)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,132.76,9.04423)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g></g><g id="moon"><g transform="matrix(1.05497,-0.215728,0.23065,1.12825,-69.4607,119.95)"><ellipse cx="627.524" cy="76.015" rx="23.21" ry="21.706" style="fill:#12022d"/></g><g transform="matrix(-1.62881,0.460257,-0.46917,-1.6608,1632.36,-88.7311)"><path class="moon-white moon-shine" d="M606.773 57.871C598.624 57.871 592.007 64.361 592.007 72.355S598.624 86.839 606.773 86.839C601.642 85.05 597.476 79.176 597.476 72.355S601.642 59.66 606.773 57.871z"/></g><g transform="matrix(-1.62881,0.460257,-0.46917,-1.6608,1632.36,-88.7311)"><path class="moon-yellow" d="M606.773 57.871C601.592 59.63 597.386 65.514 597.386 72.355 597.386 79.195 601.592 85.08 606.773 86.839 603.222 84.115 600.338 78.563 600.338 72.355S603.222 60.595 606.773 57.871z"/></g></g><g id="clouds" transform="matrix(1,0,0,0.494749,0,-0.0917815)"><g id="large-pink-1" transform="matrix(1,0,0,2.02123,72.9474,15.4079)"><path class="cloud-scroll" d="M38.964 91.691C45.229 90.594 39.89 94.724 46.284 92.637S51.786 90.74 55.754 90.55C59.722 90.359 58.28 85.065 62.809 85.151 67.338 85.238 70.649 88.652 73.447 88.463 76.245 88.274 66.063 98.507 71.774 95.692 77.486 92.877 71.788 92.523 84.388 92.964 96.987 93.405 100.378 97.597 104.491 94.937S110.644 92.03 111.771 92.03 113.113 97.192 116.138 97.554C119.163 97.915 125.219 97.845 127.173 100.94 129.126 104.034 127.662 108.212 125.223 109.702 122.785 111.192 117.49 116.908 121.873 116.164 126.255 115.42 130.775 115.099 136.456 116.278 142.138 117.456 140.427 118.659 145.168 118.483 149.909 118.308 152.247 118.723 152.522 115.515 152.797 112.308 150.217 111.151 151.584 107.461 152.95 103.771 150.432 101.536 149.709 98.252 148.986 94.967 151.058 89.673 152.988 89.279 154.917 88.885 157.223 86.189 160.407 89.724 163.59 93.26 163.653 96.852 168.694 96.676 173.735 96.501 176.001 95.977 178.116 99.796 180.232 103.614 177.944 108.544 177.944 108.544S172.353 112.771 175.405 113.472C178.457 114.173 183.004 118.263 183.929 121.244 184.855 124.224 182.036 126.499 186.464 130.199 190.892 133.9 196.097 136.696 200.619 135.958 205.142 135.22 206.324 137.014 206.866 139.328 207.408 141.643 206.263 146.208 211.953 148.475 217.643 150.743 218.518 156.233 223.733 156.753 228.947 157.273 227.655 160.32 232.573 161.469 237.492 162.618 247.888 173.475 250.02 172.469c2.13199999999998-1.006-322.934.0-322.934.0S-73.695 167.808-67.724 165.519C-61.754 163.23-60.157 165.086-58.4 160.438-56.643 155.79-56.87 154.636-51.983 151.528S-42.238 147.537-40.53 144.413C-38.822 141.29-38.468 141.311-31.463 141.818-24.458 142.325-24.217 142.929-18.358 142.665-12.499 142.402-9.331 141.63-8.102 139.105-6.873 136.58-3.743 128.081.252 127.503 4.247 126.925 9.368 125.709 9.368 121.845c0-3.863 1.473-9.411 1.473-9.411S11.438 110.826 13.115 111.173C14.792 111.52 18.952 111.52 18.952 111.52S22.34 109.23 22.089 106.455C21.837 103.68 22.909 100.548 22.909 100.548S25.398 97.62 23.805 94.858C22.212 92.097 22.855 92.097 28.541 92.097 34.227 92.097 32.698 92.788 38.964 91.691z" style="fill:#ff00a6"/></g><g id="large-pink-2" transform="matrix(1,0,0,2.02123,-547.861,15.6416)"><path class="cloud-scroll" d="M38.964 91.691C45.229 90.594 39.89 94.724 46.284 92.637S51.786 90.74 55.754 90.55C59.722 90.359 58.28 85.065 62.809 85.151 67.338 85.238 70.649 88.652 73.447 88.463 76.245 88.274 66.063 98.507 71.774 95.692 77.486 92.877 71.788 92.523 84.388 92.964 96.987 93.405 100.378 97.597 104.491 94.937S110.644 92.03 111.771 92.03 113.113 97.192 116.138 97.554C119.163 97.915 125.219 97.845 127.173 100.94 129.126 104.034 127.662 108.212 125.223 109.702 122.785 111.192 117.49 116.908 121.873 116.164 126.255 115.42 130.775 115.099 136.456 116.278 142.138 117.456 140.427 118.659 145.168 118.483 149.909 118.308 152.247 118.723 152.522 115.515 152.797 112.308 150.217 111.151 151.584 107.461 152.95 103.771 150.432 101.536 149.709 98.252 148.986 94.967 151.058 89.673 152.988 89.279 154.917 88.885 157.223 86.189 160.407 89.724 163.59 93.26 163.653 96.852 168.694 96.676 173.735 96.501 176.001 95.977 178.116 99.796 180.232 103.614 177.944 108.544 177.944 108.544S172.353 112.771 175.405 113.472C178.457 114.173 183.004 118.263 183.929 121.244 184.855 124.224 182.036 126.499 186.464 130.199 190.892 133.9 196.097 136.696 200.619 135.958 205.142 135.22 206.324 137.014 206.866 139.328 207.408 141.643 206.263 146.208 211.953 148.475 217.643 150.743 218.518 156.233 223.733 156.753 228.947 157.273 227.655 160.32 232.573 161.469 237.492 162.618 247.888 173.475 250.02 172.469c2.13199999999998-1.006-322.934.0-322.934.0S-73.695 167.808-67.724 165.519C-61.754 163.23-60.157 165.086-58.4 160.438-56.643 155.79-56.87 154.636-51.983 151.528S-42.238 147.537-40.53 144.413C-38.822 141.29-38.468 141.311-31.463 141.818-24.458 142.325-24.217 142.929-18.358 142.665-12.499 142.402-9.331 141.63-8.102 139.105-6.873 136.58-3.743 128.081.252 127.503 4.247 126.925 9.368 125.709 9.368 121.845c0-3.863 1.473-9.411 1.473-9.411S11.438 110.826 13.115 111.173C14.792 111.52 18.952 111.52 18.952 111.52S22.34 109.23 22.089 106.455C21.837 103.68 22.909 100.548 22.909 100.548S25.398 97.62 23.805 94.858C22.212 92.097 22.855 92.097 28.541 92.097 34.227 92.097 32.698 92.788 38.964 91.691z" style="fill:#ff00a6"/></g><g id="large-purple-1" transform="matrix(-1.7154,0,0,4.48956,1200.153,-398.852)"><path class="cloud-scroll-rev" d="M395.929 170C399.439 170 389.427 162.043 389.979 161.037 390.531 160.031 392.124 157.399 390.875 156.019 389.626 154.64 385.368 153.399 381.798 154.002 378.228 154.606 374.832 156.601 373.77 155.859 372.708 155.117 366.721 148.772 365.076 148.772 363.43 148.772 359.55 144.832 359.498 143.558 359.446 142.283 352.286 142.924 352.286 142.924S348.184 146.263 346.157 145.296C344.129 144.329 338.951 144.274 337.241 142.052 335.531 139.831 334.61 138.427 331.498 139.014 328.386 139.601 325.138 139.754 324.23 138.777 323.322 137.801 321.748 137.703 321.154 139.354 320.56 141.006 323.89 145.835 319.092 146.829 314.295 147.823 311.618 151.179 311.618 151.179S309.073 157.271 307.347 155.625C305.622 153.978 301.243 149.912 299.5 149.838 297.758 149.764 293.043 150.945 291.844 148.735 290.645 146.525 287.565 144.158 284.977 143.459 282.39 142.76 281.234 137.403 277.171 135.755s-11.22-2.446-11.22-4.911C265.951 128.378 259.483 125.163 256.907 125.163 254.331 125.163 255.586 128.712 253.479 128.248 251.371 127.784 250.957 125.171 248.539 125.171 246.121 125.171 242.642 129.958 238.511 129.872 234.38 129.785 233.242 129.868 231.426 131.201 229.61 132.533 221.559 137.076 219.389 136.842 217.219 136.608 217.373 140.097 215.729 140.764 214.084 141.43 213.678 144.344 211.427 145.885 209.177 147.426 204.466 148.212 205.318 152.198 206.171 156.183 210.988 159.83 209.703 159.894 208.418 159.959 207.882 163.742 205.558 164.109 203.234 164.475 201.669 165.896 199.962 168.182 198.254 170.468 199.228 169.051 195.454 169.051S186.617 170 189.479 170h206.45z" style="fill:#8a8ac9"/></g><g id="medium-purple-1" transform="matrix(1,0,0,2.02123,79.9474,18.7432)"><path class="cloud-scroll" d="M92.427 170.668c10.544.0 16.775-.480999999999995 15.186-3.953S108.402 163.111 101.622 159.574C94.843 156.037 92.675 160.672 89.953 156.214 87.231 151.756 92.672 153.342 82.55 148.936S64.926 147.185 64.425 143.303C63.924 139.422 57.673 130.74 57.673 130.74s-3.817-11.91-10.381-12.152c-6.564-.241-10.132-5.095-16.233-2.541-6.101 2.554-5.135 6.486-10.408 6.605C15.377 122.772 13.972 122.855 7.96 127.386 1.948 131.917.353 132.397-3.714 132.276-7.781 132.155-3.314 129.062-10.43 136.329-17.545 143.595-17.982 152.246-22.215 152.246-26.449 152.246-28.022 154.816-26.83 158.692-25.637 162.568-23.227 162.737-29.306 163.93-35.386 165.122-42.565 168.334-42.565 168.334L-38.348 171S81.882 170.668 92.427 170.668z" style="fill:#8a8ac9;stroke:#8a8ac9;stroke-width:1px"/></g><g id="medium-grey-1" transform="matrix(1,0,0,2.02123,206.823,20.7644)"><path class="cloud-scroll" d="M395.929 170C399.439 170 389.427 162.043 389.979 161.037 390.531 160.031 392.124 157.399 390.875 156.019 389.626 154.64 385.368 153.399 381.798 154.002 378.228 154.606 374.832 156.601 373.77 155.859 372.708 155.117 366.721 148.772 365.076 148.772 363.43 148.772 359.55 144.832 359.498 143.558 359.446 142.283 352.286 142.924 352.286 142.924S348.184 146.263 346.157 145.296C344.129 144.329 338.951 144.274 337.241 142.052 335.531 139.831 334.61 138.427 331.498 139.014 328.386 139.601 325.138 139.754 324.23 138.777 323.322 137.801 321.748 137.703 321.154 139.354 320.56 141.006 323.89 145.835 319.092 146.829 314.295 147.823 311.618 151.179 311.618 151.179S309.073 157.271 307.347 155.625C305.622 153.978 301.243 149.912 299.5 149.838 297.758 149.764 293.043 150.945 291.844 148.735 290.645 146.525 287.565 144.158 284.977 143.459 282.39 142.76 281.234 137.403 277.171 135.755s-11.22-2.446-11.22-4.911C265.951 128.378 259.483 125.163 256.907 125.163 254.331 125.163 255.586 128.712 253.479 128.248 251.371 127.784 250.957 125.171 248.539 125.171 246.121 125.171 242.642 129.958 238.511 129.872 234.38 129.785 233.242 129.868 231.426 131.201 229.61 132.533 221.559 137.076 219.389 136.842 217.219 136.608 217.373 140.097 215.729 140.764 214.084 141.43 213.678 144.344 211.427 145.885 209.177 147.426 204.466 148.212 205.318 152.198 206.171 156.183 210.988 159.83 209.703 159.894 208.418 159.959 207.882 163.742 205.558 164.109 203.234 164.475 201.669 165.896 199.962 168.182 198.254 170.468 199.377 168.272 195.603 168.272S186.617 170 189.479 170h206.45z" style="fill:#adadad"/></g><g id="small-grey-1" transform="matrix(1,0,0,2.02123,200.623,30.8705)"><path class="cloud-scroll" d="M482.824 165C486.945 165 478.121 160.349 478.121 160.349S477.853 159.126 475.669 158.676C473.485 158.227 472.444 154.349 469.784 154.349 467.124 154.349 465.908 155.495 464.767 154.349 463.625 153.204 461.182 152.266 461.182 152.266S459.542 147.028 457.959 146.455C456.376 145.882 455.255 141.84 453.584 142.88 451.912 143.921 453.821 145.416 451.912 145.47 450.004 145.523 443.993 144.376 441.61 145.935 439.228 147.494 437.476 144.639 436.458 144.227 435.439 143.816 431.558 143.205 429.166 144.488 426.773 145.772 426.503 149.125 425.046 150.222 423.59 151.319 424.366 155.87 422.633 156.491 420.899 157.112 416.091 157.659 415.692 159.543 415.292 161.427 410.407 165.011 411.836 165 412.988 164.991 479.867 165 482.824 165z" style="fill:#adadad"/></g><g id="small-grey-2" transform="matrix(2.02653,0,0,4.09608,-1000.003,-311.48)"><path class="cloud-scroll" d="M482.824 165C486.945 165 478.121 160.349 478.121 160.349S477.853 159.126 475.669 158.676C473.485 158.227 472.444 154.349 469.784 154.349 467.124 154.349 465.908 155.495 464.767 154.349 463.625 153.204 461.182 152.266 461.182 152.266S459.542 147.028 457.959 146.455C456.376 145.882 455.255 141.84 453.584 142.88 451.912 143.921 453.821 145.416 451.912 145.47 450.004 145.523 443.993 144.376 441.61 145.935 439.228 147.494 437.476 144.639 436.458 144.227 435.439 143.816 431.558 143.205 429.166 144.488 426.773 145.772 426.503 149.125 425.046 150.222 423.59 151.319 424.366 155.87 422.633 156.491 420.899 157.112 416.091 157.659 415.692 159.543 415.292 161.427 410.407 165.011 411.836 165 412.988 164.991 479.867 165 482.824 165z" style="fill:#adadad"/></g></g></g></svg>
<svg class="hero hero--pink-lines" width="100%" height="100%" viewBox="0 0 800 100" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><g transform="matrix(1,0,0,1,1,-196.312)"><g transform="matrix(1,0,0,0.506741,0,197.407)"><rect x="-.829" y="-2.161" width="801.197" height="402.37" style="fill:#12022d"/></g><g id="veticals"><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M393.82 194.416 393.843 399.466" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g></g><g id="horizontals"><path d="M0 365 8e2 365.024" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 328H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 302H0" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 280H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 263.6.0 263.843" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 249.563 8e2 249.576" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 237.737 8e2 237.846" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 230H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M-.092 222H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 215 8e2 214.978" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M.149 209H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 203H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><g transform="matrix(1,0,0,1,0,-1)"><path d="M0 2e2H8e2.0z" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/></g></g></g></svg></div><div class=main-wrapper><main class=main-content><article class=post><div class="tag-list__list styled-font"><a class=tag-list__item href=/tags/terraform>Terraform
</a><a class=tag-list__item href=/tags/how-to>How-To</a></div><header><h1 class="styled-font page-title">Debugging Terraform providers with VS Code</h1></header><p class=post__date>May 28, 2024</p><p>My first experience of &lsquo;debugging&rsquo; was using good old <code>console.log</code> in JavaScript when I was first learning about programming. Since then I&rsquo;ve learned that print statements and logs only get you so far, and <em>proper</em> debugging is so much more useful. When I first started contributing to Terraform provider projects I wasn&rsquo;t shown how to use debuggers with providers and the resources I found online were a bit fragmented. So, this blog is a way for me to share what I learned and hopefully help others (or just be a reference for myself in the future!).</p><h2 id=whats-a-terraform-provider>What&rsquo;s a Terraform provider?</h2><p>This blog won&rsquo;t cover what Terraform and Terraform providers are at great length. There are much <a href=https://developer.hashicorp.com/terraform/language/providers>better resources out on the internet to explain them</a>. Having said that, here&rsquo;s a short summary: In a nutshell, Terraform is an Infrastructure as Code (IaC) tool that lets users write declarative configuration code that is used to create resources in the &lsquo;real world&rsquo;. Terraform achieves this by interacting with APIs, for example AWS&rsquo;s APIs to create an EC2 instance, or GitHub&rsquo;s API to create a new team in a GitHub origanization. Terraform itself doesn&rsquo;t interact with APIs. Instead, Terraform instructs Terraform provider plugins to do the job of creating, reading, updating or deleting the given resource and report back with data about the resource once it&rsquo;s done.</p><h2 id=why-is-a-debugger-needed>Why is a debugger needed?</h2><p>In a perfect world providers would be a simple adapter that maps data from API entities to the data structure describing the resource in Terraform. However often APIs aren&rsquo;t designed in a way that works well with Terrform, for example: a mixture of declarative and imperative endpoints to manage one entity type, split control of a field&rsquo;s value between client and server, API entities that are split into multiple entities in Terraform to enable more fine-grained control, etc. Depending on the situation you might need to write more complex code than usual, which begins to make using a debugger more appealing. Add on considerations of how that code should behave when a resource is updated versus created, or updated given a prior state, then a debugger begins looking reeeeally appealing.</p><h2 id=setup>Setup</h2><p>To debug providers using VS Code you&rsquo;ll need to install <a href="https://marketplace.visualstudio.com/items?itemName=golang.Go">the Go extension for VS Code</a>. This extension will provide a way to debug Go code using the VS Code UI, such as creating and navigating through breakpoints. The extension requires a few dependencies to be installed, including <a href=https://github.com/go-delve/delve>Delve</a>, but VS Code should guide you through installing dependencies on your first try at debugging Go code.</p><p>Once the extension is set up, open the <a href=https://code.visualstudio.com/docs/editor/debugging#_run-and-debug-view>run and debug menu</a> in the side bar and you should see this prompt to configure the debugger tools by creating <a href=https://code.visualstudio.com/docs/editor/debugging#_launch-configurations>a launch configuration code at <code>.vscode/launch.json</code></a>.</p><figure><img src=https://res.cloudinary.com/dl1rwtqzi/image/upload/v1717346572/sarahfrench.dev/image/run-debug-menu.png><figcaption>You can either click through from here, or make `.vscode/launch.json` manually.</figcaption></figure><p>Create an empty file at <code>.vscode/launch.json</code>. The next sections will describe what configurations to include in that file and how to use them.</p><p>Finally, create a <code>.vscode/private.env</code> file and add details about environment variables that are required for running the acceptance tests and configuring the provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6272a4># Define each value on separate lines</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>KEY</span><span style=color:#ff79c6>=</span>value
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>USERNAME</span><span style=color:#ff79c6>=</span>user
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>PASSWORD</span><span style=color:#ff79c6>=</span>password
</span></span></code></pre></div><p>Make sure your repo has the <code>.vscode/</code> folder gitignored; these values should not be committed to version control.</p><p>Now we&rsquo;re ready to get started!</p><h2 id=debugging-providers-during-acceptance-tests>Debugging providers during acceptance tests</h2><p>The best approach when adding a new feature to or investigating a bug in a Terraform provider is to create an acceptance test that initially fails, following TDD. Then you work to add the feature or fix the bug so that the test passes.</p><p>The testing framework for providers uses a local Terraform binary and performs real plan, apply (etc.) actions using the provider code present in your repo. As a result, you can add breakpoints and then launch a test in debug mode to see how data flows through your new code.</p><p>First, paste this into the file (or append the configuration object if you already have a lauch.json file):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;version&#34;</span> : <span style=color:#f1fa8c>&#34;0.2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;configurations&#34;</span> : [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Debug acceptance tests
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>&#34;name&#34;</span>: <span style=color:#f1fa8c>&#34;Debug Selected Acceptance Test&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;request&#34;</span> : <span style=color:#f1fa8c>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;type&#34;</span> : <span style=color:#f1fa8c>&#34;go&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;args&#34;</span> : [
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-test.v&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-test.run&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;^${selectedText}$&#34;</span>
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;mode&#34;</span> : <span style=color:#f1fa8c>&#34;auto&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;program&#34;</span> : <span style=color:#f1fa8c>&#34;${fileDirname}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;envFile&#34;</span> : <span style=color:#f1fa8c>&#34;${workspaceFolder}/.vscode/private.env&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;showLog&#34;</span> : <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To use this debug configuration, navigate to an acceptance test in the code base and select the text of test&rsquo;s name with your cursor. Then, open the run & debug menu (click <code>View > Run</code> in the menu bar). Make sure that the dropdown menu has the &ldquo;Debug Selected Acceptance Test&rdquo; configuration selected, and then click the green arrow to start the test!</p><figure><img src=https://res.cloudinary.com/dl1rwtqzi/image/upload/v1717348861/sarahfrench.dev/image/screenshot-of-selected-test-debugging.png><figcaption>Despite clicking out of the editor tab containing the code, the test name will still be selected and used as input to the debugging configuration.</figcaption></figure><p>This configuration builds a test binary and then runs a command like this, using the selected text to narrow down which test is run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./test-binary -test.v -test.run ^&lt;selectedText value here&gt;$
</span></span></code></pre></div><p>For information on how to create breakpoints in VS Code and start properly using the debugger, see <a href=https://code.visualstudio.com/docs/editor/debugging#_breakpoints>the official VS Code debugging documentation</a>.</p><h2 id=debugging-providers-during-manual-tests>Debugging providers during manual tests</h2><p>Sometimes manual testing might be unavoidable, or maybe you&rsquo;ve reproduced a bug with some HCL files and want to dive into investigation before committing to writing a whole test! In that case you can launch a provider server in debug mode on your laptop, and then <a href=https://developer.hashicorp.com/terraform/plugin/debugging#running-terraform-with-a-provider-in-debug-mode>pass an environment variable into Terraform commands that allow use of that pre-launched provider server</a>. Bear in mind that <a href=https://github.com/hashicorp/terraform-provider-google/blob/29bb50286c91afc0b99172d5119f339d44b5ecc6/main.go#L49-L51>debug mode is a feature that provider developers need to explicitly implement in a provider&rsquo;s code</a>, so might not be available for all provider projects out there.</p><p>First, open your <code>.vscode/launch.json</code> file and paste in the following JSON (or append the configuration object if you already have a lauch.json file):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;version&#34;</span>: <span style=color:#f1fa8c>&#34;0.2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#6272a4>// Run provider in debug mode
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            <span style=color:#ff79c6>&#34;name&#34;</span>: <span style=color:#f1fa8c>&#34;Start Provider in Debug Mode&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;request&#34;</span>: <span style=color:#f1fa8c>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;type&#34;</span>: <span style=color:#f1fa8c>&#34;go&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;mode&#34;</span>: <span style=color:#f1fa8c>&#34;debug&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;args&#34;</span>: [
</span></span><span style=display:flex><span>                <span style=color:#f1fa8c>&#34;-debug&#34;</span>
</span></span><span style=display:flex><span>            ],
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;program&#34;</span>: <span style=color:#f1fa8c>&#34;${workspaceFolder}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;envFile&#34;</span>: <span style=color:#f1fa8c>&#34;${workspaceFolder}/.vscode/private.env&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>&#34;showLog&#34;</span>: <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Open the run & debug menu (click <code>View > Run</code> in the menu bar), select &ldquo;Start Provider in Debug Mode&rdquo; from the dropdown of available debugger configurations, and press the green arrow to start.</p><p>Open the debug console tab (<code>View > Debug Console</code> in the menu bar) to see the output from the process that started. Eventually you should see a message like this in the logs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Provider started. To attach Terraform CLI, <span style=color:#8be9fd;font-style:italic>set</span> the TF_REATTACH_PROVIDERS environment variable with the following:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8be9fd;font-style:italic>TF_REATTACH_PROVIDERS</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;{&#34;registry.terraform.io/hashicorp/google&#34;:{&#34;Protocol&#34;:&#34;grpc&#34;,&#34;ProtocolVersion&#34;:5,&#34;Pid&#34;:48952,&#34;Test&#34;:true,&#34;Addr&#34;:{&#34;Network&#34;:&#34;unix&#34;,&#34;String&#34;:&#34;/var/folders/tf/m6_pn85n7mxdttnfbgycrk5r0000gn/T/plugin1673856406&#34;}}}&#39;</span>
</span></span></code></pre></div><p>You can then navigate to where your HCL files are, set that environment variable in your termainl, and then proceed to run Terraform commands using your lauched provider! Again, don&rsquo;t forget that you will need to <a href=https://code.visualstudio.com/docs/editor/debugging#_breakpoints>create breakpoints in the VS Code UI</a> to actually begin debugging.</p><h2 id=conclusion>Conclusion</h2><p>The two snippets of JSON above should help you get started debugging a provider while running either an acceptance test or <code>terraform</code> CLI commands. There&rsquo;s also the option of <a href=https://developer.hashicorp.com/terraform/plugin/debugging#delve-cli>using the Delve CLI directly</a> if you want to use Delve features that aren&rsquo;t supported in the VS Code UI, but I&rsquo;ve not felt limited by using the UI.</p><p>Happy debugging!</p></article></main></div><footer class=footer><p class=footer__text>Â© 2022, Built with <a class=underline href=https://gohugo.io/ rel="noopener noreferrer nofollow" target=_blank>Hugo</a></p></footer></body></html>