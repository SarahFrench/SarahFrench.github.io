<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><style>@import 'https://fonts.googleapis.com/css2?family=VT323&display=swap'</style><link rel=stylesheet href=https://sarahfrench.dev/sass/main.css><base href=https://sarahfrench.dev/><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#menu"),t=new IntersectionObserver((e)=>{const n=e[0];n.target.classList.toggle("nav--pinned",n.intersectionRatio<1)},{threshold:[1]});t.observe(e)})</script><title>Using Terraform Providers: Dodging Default Behaviour | Sarah French</title></head><body><nav id=menu class=nav><a class=nav-link href=/ title>Home
</a><a class=nav-link href=/blog title>Blog
</a><a class=nav-link href=/memo title>Memos
</a><a class=nav-link href=/project title>Projects</a></nav><div><svg class="hero hero--clouds" width="100%" height="100%" viewBox="0 0 600 404" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><g transform="matrix(1,0,0,1,1,2.16087)"><rect x="-.829" y="-2.161" width="801.197" height="402.37" style="fill:#12022d"/><g id="veticals" class="floor-shine"><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M393.82 194.416 393.843 399.466" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g></g><g id="horizontals" class="floor-horizontal"><path d="M0 365 8e2 365.024"/><path d="M0 328H8e2"/><path d="M8e2 302H0"/><path d="M0 280H8e2"/><path d="M8e2 263.6.0 263.843"/><path d="M0 249.563 8e2 249.576"/><path d="M0 237.737 8e2 237.846"/><path d="M0 230H8e2"/><path d="M-.092 222H8e2"/><path d="M0 215 8e2 214.978"/><path d="M.149 209H8e2"/><path d="M0 203H8e2"/><path class="floor-horizon-line" d="M0 2e2H8e2.0z"/></g><g id="orion" class="orion star"><path d="M103.085 34.28l12.982 36.74L123.852 59.925l-7.709-34.501"/><path d="M116.032 70.756 144.64 86.538l17.491 5.241 59.243 37.768 18.131 43.879 41.335-38.973-57.773-23.767-14.149-37.719-28.529-10.448-17.432 28.138"/><path d="M208.987 72.816l38.454-46.12-18.034-8.938-15.201 3.921"/><path d="M247.592 26.174 261.516 53.67 258.104 64.529"/><g transform="matrix(0.204141,0,0,0.251119,147.512,5.36177)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,165.507,14.2322)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,179.738,41.6353)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,175.908,52.176)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,126.505,60.2825)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,98.6687,49.3785)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,80.4786,78.748)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,139.396,116.856)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,143.248,107.16)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,62.6625,74.0848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,34.0186,58.6969)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,42.4852,47.1863)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,35.1656,12.7774)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,20.9108,22.2022)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,157.63,160.78)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,198.853,121.664)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,141.842,97.9688)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,132.76,9.04423)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g></g><g id="stars" class="star" transform="matrix(1,0,0,1,248.716,0.816641)"><g transform="matrix(0.204141,0,0,0.251119,355.336,10.0073)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,310.777,126.984)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,243.056,1.10892)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,164.802,9.12317)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,416.225,14.9989)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,430.859,82.2276)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,17.4959,138.849)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,123.7,111.465)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,398.863,147.512)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,62.6625,74.0848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-25.6232,73.5142)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-233.733,116.464)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,35.1656,12.7774)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-297.185,64.3583)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,-274.011,5.8848)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,198.853,121.664)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,141.842,97.9688)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g><g transform="matrix(0.204141,0,0,0.251119,132.76,9.04423)"><ellipse cx="400.489" cy="50.573" rx="12.246" ry="9.955"/></g></g><g id="moon"><g transform="matrix(1.05497,-0.215728,0.23065,1.12825,-69.4607,119.95)"><ellipse cx="627.524" cy="76.015" rx="23.21" ry="21.706" style="fill:#12022d"/></g><g transform="matrix(-1.62881,0.460257,-0.46917,-1.6608,1632.36,-88.7311)"><path class="moon-white moon-shine" d="M606.773 57.871C598.624 57.871 592.007 64.361 592.007 72.355S598.624 86.839 606.773 86.839C601.642 85.05 597.476 79.176 597.476 72.355S601.642 59.66 606.773 57.871z"/></g><g transform="matrix(-1.62881,0.460257,-0.46917,-1.6608,1632.36,-88.7311)"><path class="moon-yellow" d="M606.773 57.871C601.592 59.63 597.386 65.514 597.386 72.355 597.386 79.195 601.592 85.08 606.773 86.839 603.222 84.115 600.338 78.563 600.338 72.355S603.222 60.595 606.773 57.871z"/></g></g><g id="clouds" transform="matrix(1,0,0,0.494749,0,-0.0917815)"><g id="large-pink-1" transform="matrix(1,0,0,2.02123,72.9474,15.4079)"><path class="cloud-scroll" d="M38.964 91.691C45.229 90.594 39.89 94.724 46.284 92.637S51.786 90.74 55.754 90.55C59.722 90.359 58.28 85.065 62.809 85.151 67.338 85.238 70.649 88.652 73.447 88.463 76.245 88.274 66.063 98.507 71.774 95.692 77.486 92.877 71.788 92.523 84.388 92.964 96.987 93.405 100.378 97.597 104.491 94.937S110.644 92.03 111.771 92.03 113.113 97.192 116.138 97.554C119.163 97.915 125.219 97.845 127.173 100.94 129.126 104.034 127.662 108.212 125.223 109.702 122.785 111.192 117.49 116.908 121.873 116.164 126.255 115.42 130.775 115.099 136.456 116.278 142.138 117.456 140.427 118.659 145.168 118.483 149.909 118.308 152.247 118.723 152.522 115.515 152.797 112.308 150.217 111.151 151.584 107.461 152.95 103.771 150.432 101.536 149.709 98.252 148.986 94.967 151.058 89.673 152.988 89.279 154.917 88.885 157.223 86.189 160.407 89.724 163.59 93.26 163.653 96.852 168.694 96.676 173.735 96.501 176.001 95.977 178.116 99.796 180.232 103.614 177.944 108.544 177.944 108.544S172.353 112.771 175.405 113.472C178.457 114.173 183.004 118.263 183.929 121.244 184.855 124.224 182.036 126.499 186.464 130.199 190.892 133.9 196.097 136.696 200.619 135.958 205.142 135.22 206.324 137.014 206.866 139.328 207.408 141.643 206.263 146.208 211.953 148.475 217.643 150.743 218.518 156.233 223.733 156.753 228.947 157.273 227.655 160.32 232.573 161.469 237.492 162.618 247.888 173.475 250.02 172.469c2.13199999999998-1.006-322.934.0-322.934.0S-73.695 167.808-67.724 165.519C-61.754 163.23-60.157 165.086-58.4 160.438-56.643 155.79-56.87 154.636-51.983 151.528S-42.238 147.537-40.53 144.413C-38.822 141.29-38.468 141.311-31.463 141.818-24.458 142.325-24.217 142.929-18.358 142.665-12.499 142.402-9.331 141.63-8.102 139.105-6.873 136.58-3.743 128.081.252 127.503 4.247 126.925 9.368 125.709 9.368 121.845c0-3.863 1.473-9.411 1.473-9.411S11.438 110.826 13.115 111.173C14.792 111.52 18.952 111.52 18.952 111.52S22.34 109.23 22.089 106.455C21.837 103.68 22.909 100.548 22.909 100.548S25.398 97.62 23.805 94.858C22.212 92.097 22.855 92.097 28.541 92.097 34.227 92.097 32.698 92.788 38.964 91.691z" style="fill:#ff00a6"/></g><g id="large-pink-2" transform="matrix(1,0,0,2.02123,-547.861,15.6416)"><path class="cloud-scroll" d="M38.964 91.691C45.229 90.594 39.89 94.724 46.284 92.637S51.786 90.74 55.754 90.55C59.722 90.359 58.28 85.065 62.809 85.151 67.338 85.238 70.649 88.652 73.447 88.463 76.245 88.274 66.063 98.507 71.774 95.692 77.486 92.877 71.788 92.523 84.388 92.964 96.987 93.405 100.378 97.597 104.491 94.937S110.644 92.03 111.771 92.03 113.113 97.192 116.138 97.554C119.163 97.915 125.219 97.845 127.173 100.94 129.126 104.034 127.662 108.212 125.223 109.702 122.785 111.192 117.49 116.908 121.873 116.164 126.255 115.42 130.775 115.099 136.456 116.278 142.138 117.456 140.427 118.659 145.168 118.483 149.909 118.308 152.247 118.723 152.522 115.515 152.797 112.308 150.217 111.151 151.584 107.461 152.95 103.771 150.432 101.536 149.709 98.252 148.986 94.967 151.058 89.673 152.988 89.279 154.917 88.885 157.223 86.189 160.407 89.724 163.59 93.26 163.653 96.852 168.694 96.676 173.735 96.501 176.001 95.977 178.116 99.796 180.232 103.614 177.944 108.544 177.944 108.544S172.353 112.771 175.405 113.472C178.457 114.173 183.004 118.263 183.929 121.244 184.855 124.224 182.036 126.499 186.464 130.199 190.892 133.9 196.097 136.696 200.619 135.958 205.142 135.22 206.324 137.014 206.866 139.328 207.408 141.643 206.263 146.208 211.953 148.475 217.643 150.743 218.518 156.233 223.733 156.753 228.947 157.273 227.655 160.32 232.573 161.469 237.492 162.618 247.888 173.475 250.02 172.469c2.13199999999998-1.006-322.934.0-322.934.0S-73.695 167.808-67.724 165.519C-61.754 163.23-60.157 165.086-58.4 160.438-56.643 155.79-56.87 154.636-51.983 151.528S-42.238 147.537-40.53 144.413C-38.822 141.29-38.468 141.311-31.463 141.818-24.458 142.325-24.217 142.929-18.358 142.665-12.499 142.402-9.331 141.63-8.102 139.105-6.873 136.58-3.743 128.081.252 127.503 4.247 126.925 9.368 125.709 9.368 121.845c0-3.863 1.473-9.411 1.473-9.411S11.438 110.826 13.115 111.173C14.792 111.52 18.952 111.52 18.952 111.52S22.34 109.23 22.089 106.455C21.837 103.68 22.909 100.548 22.909 100.548S25.398 97.62 23.805 94.858C22.212 92.097 22.855 92.097 28.541 92.097 34.227 92.097 32.698 92.788 38.964 91.691z" style="fill:#ff00a6"/></g><g id="large-purple-1" transform="matrix(-1.7154,0,0,4.48956,1200.153,-398.852)"><path class="cloud-scroll-rev" d="M395.929 170C399.439 170 389.427 162.043 389.979 161.037 390.531 160.031 392.124 157.399 390.875 156.019 389.626 154.64 385.368 153.399 381.798 154.002 378.228 154.606 374.832 156.601 373.77 155.859 372.708 155.117 366.721 148.772 365.076 148.772 363.43 148.772 359.55 144.832 359.498 143.558 359.446 142.283 352.286 142.924 352.286 142.924S348.184 146.263 346.157 145.296C344.129 144.329 338.951 144.274 337.241 142.052 335.531 139.831 334.61 138.427 331.498 139.014 328.386 139.601 325.138 139.754 324.23 138.777 323.322 137.801 321.748 137.703 321.154 139.354 320.56 141.006 323.89 145.835 319.092 146.829 314.295 147.823 311.618 151.179 311.618 151.179S309.073 157.271 307.347 155.625C305.622 153.978 301.243 149.912 299.5 149.838 297.758 149.764 293.043 150.945 291.844 148.735 290.645 146.525 287.565 144.158 284.977 143.459 282.39 142.76 281.234 137.403 277.171 135.755s-11.22-2.446-11.22-4.911C265.951 128.378 259.483 125.163 256.907 125.163 254.331 125.163 255.586 128.712 253.479 128.248 251.371 127.784 250.957 125.171 248.539 125.171 246.121 125.171 242.642 129.958 238.511 129.872 234.38 129.785 233.242 129.868 231.426 131.201 229.61 132.533 221.559 137.076 219.389 136.842 217.219 136.608 217.373 140.097 215.729 140.764 214.084 141.43 213.678 144.344 211.427 145.885 209.177 147.426 204.466 148.212 205.318 152.198 206.171 156.183 210.988 159.83 209.703 159.894 208.418 159.959 207.882 163.742 205.558 164.109 203.234 164.475 201.669 165.896 199.962 168.182 198.254 170.468 199.228 169.051 195.454 169.051S186.617 170 189.479 170h206.45z" style="fill:#8a8ac9"/></g><g id="medium-purple-1" transform="matrix(1,0,0,2.02123,79.9474,18.7432)"><path class="cloud-scroll" d="M92.427 170.668c10.544.0 16.775-.480999999999995 15.186-3.953S108.402 163.111 101.622 159.574C94.843 156.037 92.675 160.672 89.953 156.214 87.231 151.756 92.672 153.342 82.55 148.936S64.926 147.185 64.425 143.303C63.924 139.422 57.673 130.74 57.673 130.74s-3.817-11.91-10.381-12.152c-6.564-.241-10.132-5.095-16.233-2.541-6.101 2.554-5.135 6.486-10.408 6.605C15.377 122.772 13.972 122.855 7.96 127.386 1.948 131.917.353 132.397-3.714 132.276-7.781 132.155-3.314 129.062-10.43 136.329-17.545 143.595-17.982 152.246-22.215 152.246-26.449 152.246-28.022 154.816-26.83 158.692-25.637 162.568-23.227 162.737-29.306 163.93-35.386 165.122-42.565 168.334-42.565 168.334L-38.348 171S81.882 170.668 92.427 170.668z" style="fill:#8a8ac9;stroke:#8a8ac9;stroke-width:1px"/></g><g id="medium-grey-1" transform="matrix(1,0,0,2.02123,206.823,20.7644)"><path class="cloud-scroll" d="M395.929 170C399.439 170 389.427 162.043 389.979 161.037 390.531 160.031 392.124 157.399 390.875 156.019 389.626 154.64 385.368 153.399 381.798 154.002 378.228 154.606 374.832 156.601 373.77 155.859 372.708 155.117 366.721 148.772 365.076 148.772 363.43 148.772 359.55 144.832 359.498 143.558 359.446 142.283 352.286 142.924 352.286 142.924S348.184 146.263 346.157 145.296C344.129 144.329 338.951 144.274 337.241 142.052 335.531 139.831 334.61 138.427 331.498 139.014 328.386 139.601 325.138 139.754 324.23 138.777 323.322 137.801 321.748 137.703 321.154 139.354 320.56 141.006 323.89 145.835 319.092 146.829 314.295 147.823 311.618 151.179 311.618 151.179S309.073 157.271 307.347 155.625C305.622 153.978 301.243 149.912 299.5 149.838 297.758 149.764 293.043 150.945 291.844 148.735 290.645 146.525 287.565 144.158 284.977 143.459 282.39 142.76 281.234 137.403 277.171 135.755s-11.22-2.446-11.22-4.911C265.951 128.378 259.483 125.163 256.907 125.163 254.331 125.163 255.586 128.712 253.479 128.248 251.371 127.784 250.957 125.171 248.539 125.171 246.121 125.171 242.642 129.958 238.511 129.872 234.38 129.785 233.242 129.868 231.426 131.201 229.61 132.533 221.559 137.076 219.389 136.842 217.219 136.608 217.373 140.097 215.729 140.764 214.084 141.43 213.678 144.344 211.427 145.885 209.177 147.426 204.466 148.212 205.318 152.198 206.171 156.183 210.988 159.83 209.703 159.894 208.418 159.959 207.882 163.742 205.558 164.109 203.234 164.475 201.669 165.896 199.962 168.182 198.254 170.468 199.377 168.272 195.603 168.272S186.617 170 189.479 170h206.45z" style="fill:#adadad"/></g><g id="small-grey-1" transform="matrix(1,0,0,2.02123,200.623,30.8705)"><path class="cloud-scroll" d="M482.824 165C486.945 165 478.121 160.349 478.121 160.349S477.853 159.126 475.669 158.676C473.485 158.227 472.444 154.349 469.784 154.349 467.124 154.349 465.908 155.495 464.767 154.349 463.625 153.204 461.182 152.266 461.182 152.266S459.542 147.028 457.959 146.455C456.376 145.882 455.255 141.84 453.584 142.88 451.912 143.921 453.821 145.416 451.912 145.47 450.004 145.523 443.993 144.376 441.61 145.935 439.228 147.494 437.476 144.639 436.458 144.227 435.439 143.816 431.558 143.205 429.166 144.488 426.773 145.772 426.503 149.125 425.046 150.222 423.59 151.319 424.366 155.87 422.633 156.491 420.899 157.112 416.091 157.659 415.692 159.543 415.292 161.427 410.407 165.011 411.836 165 412.988 164.991 479.867 165 482.824 165z" style="fill:#adadad"/></g><g id="small-grey-2" transform="matrix(2.02653,0,0,4.09608,-1000.003,-311.48)"><path class="cloud-scroll" d="M482.824 165C486.945 165 478.121 160.349 478.121 160.349S477.853 159.126 475.669 158.676C473.485 158.227 472.444 154.349 469.784 154.349 467.124 154.349 465.908 155.495 464.767 154.349 463.625 153.204 461.182 152.266 461.182 152.266S459.542 147.028 457.959 146.455C456.376 145.882 455.255 141.84 453.584 142.88 451.912 143.921 453.821 145.416 451.912 145.47 450.004 145.523 443.993 144.376 441.61 145.935 439.228 147.494 437.476 144.639 436.458 144.227 435.439 143.816 431.558 143.205 429.166 144.488 426.773 145.772 426.503 149.125 425.046 150.222 423.59 151.319 424.366 155.87 422.633 156.491 420.899 157.112 416.091 157.659 415.692 159.543 415.292 161.427 410.407 165.011 411.836 165 412.988 164.991 479.867 165 482.824 165z" style="fill:#adadad"/></g></g></g></svg>
<svg class="hero hero--pink-lines" width="100%" height="100%" viewBox="0 0 800 100" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"><g transform="matrix(1,0,0,1,1,-196.312)"><g transform="matrix(1,0,0,0.506741,0,197.407)"><rect x="-.829" y="-2.161" width="801.197" height="402.37" style="fill:#12022d"/></g><g id="veticals"><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M393.82 194.416 393.843 399.466" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(0.999999,-0.000112464,-0.00011259,0.97537,6.20178,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M416.82 194.418c17.341 68.353 52.023 205.057 52.023 205.057" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M439.82 194.421 546.843 399.484" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M462.82 194.424 623.844 399.493" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M485.82 194.426 699.727 400.248" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M507.82 194.429 773.844 399.51" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M532.82 194.432 793.839 362.588" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M550.82 194.434 793.835 326.59" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M573.82 194.436 793.832 300.223" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M597.82 194.439l196.01 83.156" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M618.82 194.442l175.008 65.906" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M640.82 194.444l153.006 51.093" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M661.82 194.447l132.005 39.408" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M681.82 194.449l112.004 30.77" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M703.82 194.451 793.823 217.017" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M722.82 194.454l71.002 15.393" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M740.821 194.456 793.821 202.96" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M757.821 194.458 793.821 197.538" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g><g transform="matrix(-0.999999,-0.000112464,0.00011259,0.97537,793.798,10.4171)"><path d="M773.821 194.46 793.821 194.462" style="fill:none;stroke:#ff00a6;stroke-width:2.03px"/></g></g><g id="horizontals"><path d="M0 365 8e2 365.024" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 328H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 302H0" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 280H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M8e2 263.6.0 263.843" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 249.563 8e2 249.576" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 237.737 8e2 237.846" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 230H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M-.092 222H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 215 8e2 214.978" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M.149 209H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><path d="M0 203H8e2" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/><g transform="matrix(1,0,0,1,0,-1)"><path d="M0 2e2H8e2.0z" style="fill:none;stroke:#8a8ac9;stroke-width:1px"/></g></g></g></svg></div><div class=main-wrapper><main class=main-content><article class=post><div class="tag-list__list styled-font"><a class=tag-list__item href=/tags/terraform>Terraform
</a><a class=tag-list__item href=/tags/certifications>Certifications
</a><a class=tag-list__item href=/tags/deep-dive>Deep-Dive</a></div><header><h1 class="styled-font page-title">Using Terraform Providers: Dodging Default Behaviour</h1></header><p class=post__date>September 11, 2022</p><h1 id=contents>Contents</h1><ul><li><a href=#intro>Intro</a></li><li><a href=#providers-what-are-they>Providers: what are they?</a></li><li><a href=#whats-the-easiest-way-to-get-started-using-a-provider>The easiest way to get started using a provider</a></li><li><a href=#how-do-i-let-terraform-know-what-version-of-the-provider-to-use>Adding version constraints</a></li><li><a href=#how-do-i-use-multiple-providers-with-the-same-name%22>Using multiple providers sharing the same name</a></li><li><a href=#how-do-i-use-different-versions-of-the-same-provider%22%22>Using multiple versions of the same provider</a> (spoiler: you can&rsquo;t)</li><li><a href=#extra-how-do-i-configure-a-single-provider-to-be-used-in-different-ways>Extra: configuring one provider binary multiple ways</a></li><li><a href=#how-do-i-get-providers-from-a-source-other-than-the-public-registry>Downloading providers from places other than the public Registry</a></li><li><a href=https://gist.github.com/SarahFrench/2d0ab79d1c6eee179b0fafd952bb4289>Gist with example configs matching this article</a></li><li><a href=#conclusion>Conclusion & list of keywords</a></li></ul><h1 id=intro>Intro</h1><p>I&rsquo;ve used Terraform regularly for a while now and decided to consolidate my knowledge by studying for the <a href=https://www.hashicorp.com/certification/terraform-associate>Terraform Associate Certification</a>. I hoped this would identify gaps in my knowledge, as I&rsquo;ve found that feeling like you&rsquo;ve learned &rsquo;enough&rsquo; is an easy trap to fall into when learning a new technology. You get comfortable with your incomplete-but-sufficient mental models of how things work and don&rsquo;t know what you don&rsquo;t know, until you encounter a bug that makes zero sense to you. Or you never realise there&rsquo;s a gap and you totally miss out on features!</p><p>During my process of finding my blind spots I realised that Terraform has a lot of default behaviours that &lsquo;just work&rsquo; in the background. And that&rsquo;s great, but it also means there are whole aspects of the product that people may not fully got to grips with. For me, these knowledge gaps were around how providers are selected for download and use in a project; previous projects I worked on didn&rsquo;t have changing provider requirements, and the few changes that happened were handled by senior engineers behind closed doors. So, consider this article my version of a crash course on provider requirements.</p><p>The target reader of this article is someone who knows enough Terraform &ldquo;to be dangerous&rdquo; but hasn&rsquo;t explored all the features yet. I hope this article will surface ideas that less experienced practitioners haven&rsquo;t encountered fully and also supplement the documentation by describing an end goal and how you achieve it, versus me simply rehashing the official documentation. Also, I link to the docs throughout and I encourage you to take a look!</p><figure><iframe src=https://giphy.com/embed/iMBEgyXkFBtdCFS93i width=100% height=auto frameborder=0 class=giphy-embed allowfullscreen></iframe><p><a href=https://giphy.com/gifs/afv-beach-jump-hole-iMBEgyXkFBtdCFS93i></a></p><figcaption>Let's dive in...</figcaption></figure><hr><h1 id=providers-what-are-they>Providers: what are they?</h1><p><a href=https://www.terraform.io/intro#how-does-terraform-work>Terraform is an infrastructure as code tool</a> made by HashiCorp. Providers are modular plugins that allow Terraform to talk to more APIs, so you as a practitioner can provision and manage more <em>stuff</em> in different places using Terraform.</p><p>The &lsquo;core&rsquo; code of Terraform is mainly responsible for identifying differences between desired state and reality. It does this by comparing your project&rsquo;s declarative <a href=https://www.terraform.io/language>configuration files</a> to the current status of resources as recorded in the <a href=https://www.terraform.io/language/state>state file</a>. If a change needs to take place, for example creating a new resource, Terraform instructs the provider to create it and doesn&rsquo;t need to know the exact details of how that is done.</p><p>Another responsibility of Terraform&rsquo;s core code is reading the configuration files and determining which providers are required, and then downloading the provider binary files. If those providers aren&rsquo;t downloaded then Terraform cannot manage infrastructure using them, right? Providers are first downloaded when initialising a working directory with the <code>terraform init</code> command. <a href=https://www.terraform.io/cli/init>Read about <code>terraform init</code> here</a>.</p><p>So now we&rsquo;ve established all that&mldr; how do you actually start using providers?</p><h2 id=whats-the-easiest-way-to-get-started-using-a-provider>What&rsquo;s the easiest way to get started using a provider?</h2><p>Getting started with Terraform is easy due to a lot of helpful default behaviours. Because of these defaults, you can get started provisioning infrastructure with surprisingly little configuration code.</p><p>Let&rsquo;s say I want to make a bucket in GCP. The most minimal configuration I&rsquo;d need to achieve this is below. Note: I&rsquo;d need to supply details like GCP credentials via ENV variables to make this work.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#6272a4># main.tf file
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;google_storage_bucket&#34; &#34;my-bucket&#34;</span> {
</span></span><span style=display:flex><span>  name          <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;auto-expiring-bucket&#34;</span>
</span></span><span style=display:flex><span>  location      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;US&#34;</span>
</span></span><span style=display:flex><span>  force_destroy <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>lifecycle_rule</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>condition</span> {
</span></span><span style=display:flex><span>      age <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>action</span> {
</span></span><span style=display:flex><span>      type <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;Delete&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>Nowhere in the configuration do I explicitly say that I want to use the <code>google</code> provider for GCP, in general or specifically for this resource. Despite this, if I run <code>terraform init</code> the google provider is downloaded in preparation for provisioning the storage bucket.</p><p>How does this work? In the absence of other instructions, Terraform looks for a provider that shares a name with the first word of the resource type. So for <code>google_storage_bucket</code> it decides to go looking for a provider called <code>google</code>. It also assumes that we want to download the provider from the public Registry (<a href=https://registry.terraform.io/>https://registry.terraform.io/</a> ), and that the publisher of the provider is HashiCorp. Finally, if Terraform finds a provider that matches all those criteria, the latest version of the provider is picked by default.</p><p>From the minimal configuration above, Terraform knows to navigate the public Registry&rsquo;s API <a href=https://registry.terraform.io/v1/providers/hashicorp/google/versions>to request details about available versions of the <code>google</code> provider under the <code>hashicorp</code> namespace</a>, find the latest version and, begin downloading.</p><p>In summary, here are the defaults/assumptions affecting the configuration above:</p><ul><li>download source</li><li>author name</li><li>provider name</li><li>version to download</li></ul><h2 id=isnt-this-good-enough>Isn&rsquo;t this good enough?</h2><p>In short, no, it isn&rsquo;t ðŸ˜…. These default behaviours are great to help people get up and running quickly when they first start using Terraform, but in the long term you&rsquo;ll have trouble relying on default behaviours. In terms of engineering decisions, your journey is only just beginning.</p><p>Relying on default behaviours without understanding how they work will make these scenarios difficult:</p><ul><li>What if you need to use a specific provider version, instead of the latest one?</li><li>How would you use another author&rsquo;s <code>google</code> provider?</li><li>What if you need to use different versions of a provider in the same Terraform project?</li><li>What about using different configurations of the same provider in the same Terraform project?</li><li>How can you download a provider from somewhere other than the public Registry, for example from your local disk?</li></ul><p>I&rsquo;ll address these in the following sections!</p><h2 id=how-do-i-let-terraform-know-what-version-of-the-provider-to-use>How do I let Terraform know what version of the provider to use?</h2><p>In the scenario above, Terraform pulls down the latest version of the provider by default. That&rsquo;s fine if you&rsquo;re working alone, but if you share your project&rsquo;s configuration files with others you want to make sure they use the same version of the provider as you when they use the config files.</p><p>The first step towards this is committing the <a href=https://www.terraform.io/language/files/dependency-lock>dependency lock file</a> in version control. This file is analagous to package.lock files used in JavaScript projects, or Gemfile.lock files in Ruby projects. It contains details that allows someone new to your project download the exact same versions of the providers you used when they run <code>terraform init</code> for the first time.</p><p>But imagine that time passes and you learn that one of the several providers you are using has a new feature that you&rsquo;d like to use in your configuration. You run <a href=https://www.terraform.io/cli/commands/init#plugin-installation><code>terraform init -upgrade</code></a> so that Terraform ignores the lock file and downloads the latest version of that provider, but- oops! That command actually causes <em>all of your providers</em> to be upgraded to the latest release. This is risky; what if one of the providers has a breaking change in it? How would you return to the old version of one provider while keeping another provider upgraded to the new version?</p><p>Ideally we&rsquo;d want to explicitly set versions for each provider individually, so the upgrade process can be more modular and controlled. To do this we can add in <strong>version constraints</strong> inside a new <code>terraform</code> configuration block in our configuration. This block lets us <a href=https://www.terraform.io/language/settings>configure how Terraform runs</a> when using those specific configuration files but is not required for Terraform to work.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#6272a4># main.tf file
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>terraform</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>required_providers</span> {
</span></span><span style=display:flex><span>        google <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            version <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;~&gt;4.1.0&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;google_storage_bucket&#34; &#34;my-bucket&#34;</span> {
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Adding this snippet means that <code>terraform init -upgrade</code> can only upgrade providers within the version constraints explicitly defined in the configuration. An added benefit is that your commit history in version control has clearer evidence of past upgrade decisions and is more human-readable than the dependency lock file.</p><p>In summary, here are the defaults/assumptions affecting the configuration above:</p><ul><li>download source</li><li>author name</li><li>provider name</li><li><del>version to download</del> (we&rsquo;re one down!)</li></ul><h2 id=how-do-i-use-multiple-providers-with-the-same-name>How do I use multiple providers with the same name?</h2><p>Suppose you&rsquo;ve got a Terraform project that uses the mainstream Google provider in most places, but for a few resources you want to use a forked version of the provider that you published to the public Registry under <code>my-org</code>.</p><p>To use both providers in the same project, you can start by adding a <code>source</code> to the original <code>google</code> block in <code>required_providers</code>. This tells Terraform to download the first provider from the <code>hashicorp</code> <strong>namespace</strong> in the public Registry. Namespace essentially means the author that published the provider to the Registry.</p><p>Next, you can add a new block in <code>required_providers</code> that describes the new <code>google</code> provider&rsquo;s source and version constraints, too.</p><p>Here are those two changes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span># main.tf file
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>terraform {
</span></span><span style=display:flex><span>    required_providers {
</span></span><span style=display:flex><span>        google = {
</span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700>+            source = hashicorp/google
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700></span>            version = &#34;~&gt;4.1.0&#34;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700>+        google = {
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700>+            source = my-org/google
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700>+            version = &#34;=1.3.0&#34;
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700>+        }
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700></span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span># This won&#39;t work!
</span></span></code></pre></div><p>The configuration above is on the right track however there&rsquo;s a problem. There&rsquo;ll be an error about duplicate entries in <code>required_providers</code> because there are two keys called <code>google</code>.</p><p>The key for a given provider in the <code>required_providers</code> map is called the provider&rsquo;s <a href=https://www.terraform.io/language/providers/requirements#local-names><strong>local name</strong></a>. The local name doesn&rsquo;t <em>need</em> to match the name of the provider, but if it does then it&rsquo;s said that the provider has its <a href=https://www.terraform.io/language/providers/requirements#handling-local-name-conflicts><strong>preferred local name</strong></a>.</p><p>Something really useful about Terraform is that if the local name of a provider matches the <em>preferred</em> local name then Terraform will automatically use that provider to provision any resources where the resource type starts with that preferred local name. For example, when we provision our <code>google_storage_bucket</code> resource (or any <code>google_</code> resource) we don&rsquo;t need to explicitly label that resource as managed by the <code>google</code> provider. Terraform will look in all the loaded providers and find the provider using the matching local name. Easy peasy.</p><p>But now that we&rsquo;ve got two providers called <code>google</code> it&rsquo;s very easy to break this convenient behaviour.</p><p>For example we could update the configuration this way so both providers have unique local names:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span># main.tf file
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>terraform {
</span></span><span style=display:flex><span>    required_providers {
</span></span><span style=display:flex><span><span style=color:#f55>-        google = {
</span></span></span><span style=display:flex><span><span style=color:#f55></span><span style=color:#50fa7b;font-weight:700>+        hashicorp-google = {
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700></span>            source = hashicorp/google
</span></span><span style=display:flex><span>            version = &#34;~&gt;4.1.0&#34;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span><span style=color:#f55>-        google = {
</span></span></span><span style=display:flex><span><span style=color:#f55></span><span style=color:#50fa7b;font-weight:700>+        my-org-google = {
</span></span></span><span style=display:flex><span><span style=color:#50fa7b;font-weight:700></span>            source = my-org/google
</span></span><span style=display:flex><span>            version = &#34;=1.3.0&#34;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This would solve the issue where Terraform complains about duplicate entries with the same name, but now neither of the providers have the preferred local name and Terraform won&rsquo;t automatically know which provider to use for our resources. We would need to add a <a href=https://www.terraform.io/language/meta-arguments/resource-provider><code>provider</code> meta-argument</a> to <em>every</em> GCP resource in our project to tell Terraform which provider to use when managing it. That change could touch a lot of files and resources, depending on project size!</p><p>Assuming that the new <code>my-org/google</code> provider is used for a small subset of resources, you could leave the <code>hashicorp/google</code> provider with the preferred local name. That way, only that small subset of resources will need to have <code>provider = my-org-google</code> arguments added into their configuration blocks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#6272a4># main.tf file
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>terraform</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>required_providers</span> {
</span></span><span style=display:flex><span>        google <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            source <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>hashicorp</span>/<span style=color:#ff79c6>google</span>
</span></span><span style=display:flex><span>            version <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;~&gt;4.1.0&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        my-org-google <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            source <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>my</span>-<span style=color:#ff79c6>org</span>/<span style=color:#ff79c6>google</span>
</span></span><span style=display:flex><span>            version <span style=color:#ff79c6>=</span> &#34;<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>.<span style=color:#bd93f9>3</span>.<span style=color:#bd93f9>0</span>&#34;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;google_storage_bucket&#34; &#34;my-bucket&#34;</span> {<span style=color:#6272a4>
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    # No provider argument needed here
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>    ...
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;google_storage_bucket&#34; &#34;bucket-made-with-my-provider&#34;</span> {
</span></span><span style=display:flex><span>    provider <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>my</span>-<span style=color:#ff79c6>org</span>-<span style=color:#ff79c6>google</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>However <a href="https://www.terraform.io/language/providers/requirements#:~:text=When%20this%20happens%2C%20we%20recommend%20combining%20each%20provider%27s%20namespace%20with%20its%20type%20name%20to%20produce%20compound%20local%20names%20with%20a%20dash">the official recommendation in the documentation</a> is to prepend local names of providers with the namespace. This would have the advantage of not assuming that contributors to your configuration have knowledge about preferred/non-preferred local names and would help avoid mistakes. It&rsquo;s your call!</p><p>In summary, here are the defaults/assumptions affecting the configuration above:</p><ul><li>download source</li><li><del>author name</del></li><li>provider name - <strong>now we&rsquo;re consciously using this assumption to our advantage</strong>, but also explicitly overriding it with <code>provider</code></li><li><del>version to download</del></li></ul><h2 id=how-do-i-use-different-versions-of-the-same-provider>How do I use different versions of the same provider?</h2><figure><iframe src=https://giphy.com/embed/1kTUoVrBUh7psXaxDs width=100% height=auto frameborder=0 class=giphy-embed allowfullscreen></iframe><p><a href=https://giphy.com/gifs/latenightseth-lol-seth-meyers-1kTUoVrBUh7psXaxDs></a></p><figcaption>This was a surprise to me too</figcaption></figure><p>You would think that this is handled in a similar way to the scenario above, but it&rsquo;s actually not possible to use multiple versions of the same provider (i.e different versions of a namespace + provider name combo) in the same configuration.</p><p><a href=https://discuss.hashicorp.com/t/multiple-versions-of-same-provider-explicit-module-provider/20832>Here&rsquo;s an answer in the Hashicorp Discuss forum</a> explaining why that is the case. Terraform only allows one version of a given provider to be used in your configuration, as this avoids issues when passing providers into modules.</p><h2 id=extra-how-do-i-configure-a-single-provider-to-be-used-in-different-ways>Extra: How do I configure a single provider to be used in different ways?</h2><p>(This is &rsquo;extra&rsquo; as it goes into how we use providers after they&rsquo;re downloaded, versus the rest of the article describing how to change provider installation behaviour)</p><p>When we define a list of providers in <code>required_providers</code> we are telling Terraform what binary files to download, from where and at what version. However, those provider binary may be configurable and allow Terraform to use the same provider to provision resources in different ways. Below is an example of configuring the google provider, taken from <a href=https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/provider_reference>the documentation</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>provider</span> <span style=color:#f1fa8c>&#34;google&#34;</span> {
</span></span><span style=display:flex><span>  project     <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;my-project-id&#34;</span>
</span></span><span style=display:flex><span>  region      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;us-central1&#34;</span>
</span></span><span style=display:flex><span>  zone        <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;us-central1-c&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Here we are configuring default values for <code>project</code>, <code>region</code> and <code>zone</code> which can be used when provisioning resources (unless they are provided in the resource&rsquo;s config). The heading of the <code>provider</code> block references the provider via the local name used in <code>required_providers</code>, hence the label <code>"google"</code>.</p><p>If we wanted, we could make a second configuration of the provider that automatically passes in different values, e.g. European locations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>provider</span> <span style=color:#f1fa8c>&#34;google&#34;</span> {
</span></span><span style=display:flex><span>  project     <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;my-project-id&#34;</span>
</span></span><span style=display:flex><span>  region      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;us-central1&#34;</span>
</span></span><span style=display:flex><span>  zone        <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;us-central1-c&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>provider</span> <span style=color:#f1fa8c>&#34;google&#34;</span> {
</span></span><span style=display:flex><span>  alias       <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;europe&#34;</span><span style=color:#6272a4> # alias needed!
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  project     <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;my-project-id&#34;</span>
</span></span><span style=display:flex><span>  region      <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;europe-west2&#34;</span>
</span></span><span style=display:flex><span>  zone        <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;europe-west2-a&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>An <a href=https://www.terraform.io/language/providers/configuration#alias-multiple-provider-configurations><code>alias</code> meta-argument</a> is needed because this is the second configuration of the same provider. This raises the question - how does Terraform know which configuration of the provider to use when managing a resource?</p><p>There&rsquo;s some more default behaviour to be aware of here. When a resource doesn&rsquo;t include a <code>provider</code> argument Terraform will then look for a provider with a matching preferred local name, as already discussed above. It will <em>also</em> pull in the provider configuration that doesn&rsquo;t have an alias, as this is considered the <a href=https://www.terraform.io/language/providers/configuration#default-provider-configurations><strong>default provider configuration</strong></a>. A default provider configuration is present even in the absence of provider configuration blocks because <a href=https://www.terraform.io/language/providers/configuration#provider-configuration-1>&ldquo;Terraform assumes an empty default configuration for any provider that is not explicitly configured&rdquo;</a></p><p>If you want to use a non-default provider configuration to provision a resource instead then you need to add a <code>provider</code> meta-argument with a value of <code>&lt;LOCAL NAME>.&lt;ALIAS></code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>resource</span> <span style=color:#f1fa8c>&#34;google_storage_bucket&#34; &#34;bucket-made-with-provider-alias&#34;</span> {
</span></span><span style=display:flex><span>    provider <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>google</span>.<span style=color:#ff79c6>europe</span>
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It&rsquo;s important to think about your provider aliases as it can impact how providers are made accessible to modules. This is beyond the scope of this article, but for extra reading you can see how <a href=https://www.terraform.io/language/modules/develop/providers#implicit-provider-inheritance>implicit provider inheritance</a> automatically makes all your default provider configurations available to child modules in your project. This is another default behaviour you might want to prevent by <a href=https://www.terraform.io/language/modules/develop/providers#passing-providers-explicitly>explicitly passing in providers instead</a>.</p><p>And finally, remember: aliases and local names are <em>separate</em> but related concepts.</p><p>Ok, one last section to go!</p><h2 id=how-do-i-get-providers-from-a-source-other-than-the-public-registry>How do I get providers from a source other than the public Registry?</h2><p>Of all the default behaviours I listed previously, the only default behaviour we haven&rsquo;t addressed yet is where Terraform actually downloads providers from.</p><p>Terraform defaults to using the public Registry, but <strong>private Registries</strong> are also an option. This may be required if a company has created a provider to help manage resources using their private, internal APIs and they don&rsquo;t want details of their internal systems to be publically accessible.</p><p>In this scenario you can use a private Registry hosted in Terraform Cloud (TFC), or you can host your own Registry service. These two options behave just like the public Registry by implementing the <a href=https://www.terraform.io/internals/provider-registry-protocol>&ldquo;Provider Registry Protocol&rdquo;</a>, but users need the correct auth to access the providers published there.</p><p>The solution to this is understanding what a <strong>registry source address</strong> is. Registry source addresses are made of three parts -hostname, namespace, and provider- and are structured like <code>&lt;HOSTNAME>/&lt;NAMESPACE>/&lt;PROVIDER></code>. If this sounds familiar it&rsquo;s because we&rsquo;ve already encountered source addresses when providing <code>source</code> arguments in <code>required_providers</code> within the <code>terraform</code> block:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>terraform</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>required_providers</span> {
</span></span><span style=display:flex><span>        google <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            source  <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>hashicorp</span>/<span style=color:#ff79c6>google</span><span style=color:#6272a4> # This is &lt;NAMESPACE&gt;/&lt;PROVIDER&gt;
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            version <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;~&gt;4.1.0&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The source argument here is not a &ldquo;fully-qualified address&rdquo; and is lacking the hostname. When the hostname is missing, Terraform assumes you want to use the public Registry and prefixes the source we provided with the hostname <code>registry.terraform.io</code>. The above source is equivalent to <code>registry.terraform.io/hashicorp/google</code>.</p><p>If we want to use a private Registry, all we need to do is include a non-default hostname in the <code>source</code> argument! For a private Registry in TFC we&rsquo;d supply <code>app.terraform.io</code>, and if you created your own private Registry you&rsquo;d supply your own hostname.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#ff79c6>terraform</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>required_providers</span> {
</span></span><span style=display:flex><span>        google <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>            source  <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;app.terraform.io/hashicorp/google&#34;</span><span style=color:#6272a4> # Using private Registry in TFC
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>            version <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;~&gt;4.1.0&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As the private Registry is private you would then need to configure the Terraform CLI with credentials for access. The CLI is configured by a single file, which on Mac is a <code>.terraformrc</code> file in a user&rsquo;s home directory. <a href=https://www.terraform.io/cli/config/config-file#credentials>There&rsquo;s a section in the documentation describing how to configure credentials for the CLI here</a>.</p><h3 id=other-options-besides-publicprivate-registries>Other options besides public/private Registries</h3><p>There are other options besides Registries, but doing a deep dive into how they&rsquo;re configured is beyond the scope of this article. I&rsquo;ll summarise them quickly with links to documentation.</p><p>Both these options require configuration of the Terraform CLI itself, instead of explicit changes in the configuration files in your working directory. You set up your <code>required_providers</code> list in the same way as before.</p><p><a href=https://www.terraform.io/cli/config/config-file#network_mirror><strong>Network mirrors</strong></a> : these allow Terraform to download providers across a network connection from places that do not implement the &ldquo;Provider Registry Protocol&rdquo;. Instead, they implement a simpler <a href=https://www.terraform.io/internals/provider-network-mirror-protocol>&ldquo;Provider Network Mirror Protocol&rdquo;</a>. These are appropriate if you don&rsquo;t want to use TFC&rsquo;s private Registries or implement a full Registry yourself. Version selection and using checksums is supported here.</p><p><a href=https://www.terraform.io/cli/config/config-file#filesystem_mirror><strong>Filesystem mirrors</strong></a> : these allow Terraform to get providers from a location on the local disk, and is useful if you run Terraform in a private cloud environment where access to the public internet is restricted. Version selection and using checksums is supported here.</p><h1 id=gist-full-configs-matching-this-article>Gist: Full configs matching this article</h1><p>âœ¨ <a href=https://gist.github.com/SarahFrench/2d0ab79d1c6eee179b0fafd952bb4289>Here&rsquo;s a gist with example configs matching this article</a></p><h2 id=conclusion>Conclusion</h2><figure><iframe src=https://giphy.com/embed/McHNcxIszjVStqZZ8s width=100% height=auto frameborder=0 class=giphy-embed allowfullscreen></iframe><p><a href=https://giphy.com/gifs/foofighters-foo-fighters-studio-666-McHNcxIszjVStqZZ8s></a></p><figcaption>That's enough for one article!</figcaption></figure><p>I hope this article has helped your understanding of Terraform, or exposed you to keywords that weren&rsquo;t familiar to you before. By seeing the progression of a Terraform configuration from minimal to more explicit (or complex) you should be able to
identify what default behaviours your own Terraform projects are using.</p><p>A lot of the things covered here may not be immediately relevant to any projects you&rsquo;re working on but should help you make sense of any unexpected errors arising from default behaviours! For instance if you had a Terraform configuration that used only <a href=https://registry.terraform.io/providers/hashicorp/google-beta/latest>the <code>google-beta</code> provider</a> and you added a <code>google_</code> resource without a <code>provider</code> meta-argument you&rsquo;d get an error saying &ldquo;Required plugins are not installed&rdquo;. You might then remember that there&rsquo;s a default behaviour to look for providers with the preferred local name, and that&rsquo;s why Terraform wants you to install the <code>google</code> provider instead of using the <code>google-beta</code> provider like you intended.</p><p>The article is jargon-heavy, so here&rsquo;s a summary of keywords and concepts we covered:</p><ul><li>version contraints : <a href=https://www.terraform.io/language/expressions/version-constraints>docs 1</a>, <a href=https://www.terraform.io/language/providers/requirements#version-constraints>docs 2</a></li><li>(registry) source address : <a href=https://www.terraform.io/language/providers/requirements#source-addresses>docs 1</a>, <a href=https://www.terraform.io/language/modules/sources#terraform-registry>docs 2</a></li><li>hostname</li><li>namespace</li><li>provider</li><li>fully-qualified source address = <code>&lt;HOSTNAME>/&lt;NAMESPACE>/&lt;PROVIDER></code></li><li><a href=https://www.terraform.io/language/providers/requirements#local-names>local name</a></li><li>preferred local name</li><li><a href=https://www.terraform.io/language/providers/configuration#default-provider-configurations>default provider configuration</a></li><li><a href=https://www.terraform.io/language/providers/configuration#alias-multiple-provider-configurations>alias</a></li></ul><p>And here are the concepts we touched on but not explored fully in the article:</p><ul><li><a href=https://www.terraform.io/language/modules/develop/providers#implicit-provider-inheritance>implicit provider inheritance by modules</a></li><li><a href=https://www.terraform.io/language/modules/develop/providers#passing-providers-explicitly>explicit passing of providers to modules</a></li><li><a href=https://www.terraform.io/internals/provider-registry-protocol>Provider Registry Protocol</a></li><li><a href=https://www.terraform.io/internals/provider-network-mirror-protocol>Provider Network Mirror Protocol</a></li><li><a href=https://www.terraform.io/cli/config/config-file#network_mirror>Network mirrors</a></li><li><a href=https://www.terraform.io/cli/config/config-file#filesystem_mirror>Filesystem mirrors</a></li></ul></article></main></div><footer class=footer><p class=footer__text>Â© 2022, Built with <a class=underline href=https://gohugo.io/ rel="noopener noreferrer nofollow" target=_blank>Hugo</a></p></footer></body></html>